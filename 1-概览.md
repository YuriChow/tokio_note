Tokio 是 ***Rust*** 编程语言的一个异步运行时。它提供了编写网络应用程序所需的构建积木。它提供了以各种系统为目标的灵活性，从具有数十个核心的大型服务器到小型嵌入式设备。                    
在高阶上，Tokio 提供了几个主要组件：
- 用于执行异步代码的 ***多线程*** 运行时。
- 标准库的异步版本。
- 库的大型生态系统。


# Tokio 在您的项目中扮演的角色
当您以异步方式编写应用程序时，您可以通过 降低同时执行许多操作的成本，使其能够更好地 scale(扩张)。但是，异步 ***Rust*** 代码不会单独运行，因此您必须选择一个运行时来执行它。Tokio 库是使用最广泛的运行时，超过了所有其他运行时的使用组合。               
此外，Tokio 提供了许多有用的实用工具。编写异步代码时，不能使用 ***Rust*** 标准库提供的普通阻塞 API，而必须使用它们的异步版本。这些替代版本由 Tokio 提供，在它有意义的地方镜像了 ***Rust*** 标准库的 API。


# Tokio 的优势
本节将概述 Tokio 的一些优势。

## ***Fast - 快***
Tokio 是 ***fast(快)*** 的，建立在 ***Rust*** 编程语言之上，而 ***Rust*** 本身就是快速的。这是本着 ***Rust*** 的精神进行的，目标是您不能够通过手工编写等效代码来提高性能。                  
Tokio是 ***scalable(可扩张的)***，建立在 async/await 语言特性之上，该特性本身是可扩展的。在处理网络时，由于延迟，您处理连接的速度是有限的，因此唯一的扩展方法是一次处理多个连接。使用 async/await 语言功能，增加并发操作的数量变得非常便宜，允许您扩张到大量并发任务。

## ***Reliable - 可信赖的***
Tokio 是使用 ***Rust*** 构建的，***Rust*** 是一种使每个人都能够构建可靠和高效软件的语言。[大量](https://www.zdnet.com/article/microsoft-70-percent-of-all-security-bugs-are-memory-safety-issues/) [研究](https://www.chromium.org/Home/chromium-security/memory-safety) 发现，大约 70% 的高严重性安全漏洞是内存不安全造成的。使用 ***Rust*** 可以消除应用程序中的此整类错误。            
Tokio 还极其专注于提供始终如一的行为，没有意外。Tokio 的主要目标是允许用户部署可预测的软件，该软件将以 可靠的响应时间 和 没有不可预测的延迟尖峰 来日复一日地执行相同的操作。

## ***Easy - 容易的***
通过 ***Rust*** 的 async/await 功能，编写异步应用程序的复杂性大大降低。与 Tokio 的实用工具 和 充满活力的生态系统相结合，编写应用程序是一件轻而易举的事。         
Tokio 遵循标准库的命名习俗，当它有意义时。这允许轻松地将仅使用标准库编写的代码转换为使用 Tokio 编写的代码。使用 ***Rust*** 的强类型系统，轻松交付正确代码的能力是无与伦比的。          

## ***Flexible - 灵活的***
Tokio 提供了运行时的多种变体。从多线程、***[work-stealing](https://en.wikipedia.org/wiki/Work_stealing)(窃取工作)*** 的运行时到轻量级、单线程的运行时。这些运行时中的每一个都带有许多“旋钮”，允许用户根据自己的需要进行调整。


# 什么时候不使用 Tokio
尽管 Tokio 对于许多需要同时做很多事情的项目很有用，但也有一些使用情况下，Tokio 并不适合。
- 通过在多个线程上并行运行 ***CPU-bound(计算密集型)*** 的计算来加快它们的计算速度。***Tokio 专为 IO-bound(IO密集型) 应用而设计***，其中每个任务的大部分时间都在等待 IO。如果您的应用程序所做的唯一事情是并行运行计算，则应该使用 [rayon](https://docs.rs/rayon/)。也就是说，如果你需要同时做这两件事，仍然可以“混搭”。
- 读取很多文件。尽管看起来 Tokio 对于只需要读取大量文件的项目很有用，但与普通线程池相比，***Tokio 在这里没有任何优势***。这是因为操作系统通常不提供异步文件 API。
- 发送单个 web 请求。Tokio 给你带来优势的地方是当你需要同时做很多事情的时候。如果您需要使用一个用于异步 ***Rust*** 的库，例如 [reqwest](https://docs.rs/reqwest/)，但您***不需要一次做很多事情，那么您应该更喜欢那个库的阻塞版本，因为它将使您的项目更简单***。当然，使用 Tokio 仍然有效，但与阻塞 API 相比，它没有真正的优势。如果库不提供阻塞 API，请参阅 [the chapter on bridging with sync code](https://tokio.rs/tokio/topics/bridging)。


# 获取帮助
在任何情况下，如果你陷入困境，你都可以在 [Discord](https://discord.gg/tokio) 或 [GitHub discussions](https://github.com/tokio-rs/tokio/discussions) 中获得帮助。不要担心问“初学者”问题。我们都从某个地方开始，很乐意提供帮助。
